ALMEMORY_KEY_NAMES = [
"Device/SubDeviceList/HeadYaw/Position/Sensor/Value",
"Device/SubDeviceList/HeadYaw/Position/Actuator/Value",
]

ROBOT_IP = "nao.local"

import os
import sys
import time

from naoqi import ALProxy



def main():

    nao_ip = "127.0.0.1"
    PORT = 9559
    
    
    motion = ALProxy("ALMotion", nao_ip, 9559)
    redBallTracker = ALProxy("ALRedBallTracker", nao_ip, PORT)
    
    # First, set Head Stiffness to ON.
    motion.setStiffnesses("Head", 1.0)
    # Then, start tracker.
    redBallTracker.startTracker()
    
    
    # Will go to 1.0 then 0 radian
    # in two seconds
    motion.post.angleInterpolation(
        ["HeadYaw"],
        [1.0, 0.0],
        [1  , 2],
        False
    )
    
    """ Record the data from ALMemory.
    Returns a matrix of values
    
    """
    print "Recording data ..."
    memory = ALProxy("ALMemory", nao_ip, 9559)
    data = list()
    
    
    while True:
        line = list()
        key = "Device/SubDeviceList/HeadYaw/Position/Sensor/Value"
        value = memory.getData(key)
        line.append(value)
        print key
        print value
        data.append(line)
        time.sleep(1)
    
    
    # Stop tracker and remove head stiffness.
    redBallTracker.stopTracker()
    motion.setStiffnesses("Head", 0.0)
    
        
if __name__ == "__main__":
    try:
        main()
    except KeyboardInterrupt:
        # do nothing here
        pass
            
            